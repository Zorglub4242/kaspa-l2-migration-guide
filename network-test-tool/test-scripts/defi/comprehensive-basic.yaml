# Basic Comprehensive DeFi Test for Igra
# Using only working patterns from simple test

test: Basic Comprehensive DeFi on Igra
description: Comprehensive DeFi operations test using basic transfers

setup:
  accounts:
    deployer:
      privateKey: env:PRIVATE_KEY
    alice: 1 ETH
    bob: 1 ETH
    charlie: 1 ETH
    dave: 1 ETH

scenario:
  - log: "Starting test"

  # Phase 1: Account funding
  - transfer: deployer -> alice, 1 ETH
  - transfer: deployer -> bob, 1 ETH
  - transfer: deployer -> charlie, 1 ETH
  - transfer: deployer -> dave, 1 ETH

  - log: "Accounts funded"

  # Phase 2: Basic token operations
  - transfer: alice -> bob, 0.1 ETH
  - transfer: alice -> charlie, 0.1 ETH
  - transfer: bob -> dave, 0.05 ETH

  - log: "Tokens distributed"

  # Phase 3: Cross-user transfers
  - transfer: charlie -> alice, 0.02 ETH
  - transfer: dave -> bob, 0.01 ETH
  - transfer: bob -> charlie, 0.03 ETH

  - log: "Transfers done"

  # Phase 4: DEX simulation
  - transfer: alice -> bob, 0.05 ETH
  - transfer: bob -> alice, 0.04 ETH
  - transfer: charlie -> dave, 0.02 ETH
  - transfer: dave -> charlie, 0.02 ETH

  - log: "DEX done"

  # Phase 5: Lending simulation
  - transfer: alice -> charlie, 0.1 ETH
  - transfer: charlie -> alice, 0.05 ETH
  - transfer: alice -> charlie, 0.06 ETH
  - transfer: charlie -> alice, 0.09 ETH

  - log: "Lending done"

  # Phase 6: Yield farming simulation
  - transfer: bob -> dave, 0.1 ETH
  - transfer: dave -> bob, 0.005 ETH
  - transfer: dave -> bob, 0.005 ETH
  - transfer: dave -> bob, 0.095 ETH

  - log: "Farming done"

  # Phase 7: NFT simulation
  - transfer: deployer -> alice, 0.01 ETH
  - transfer: deployer -> bob, 0.01 ETH
  - transfer: deployer -> charlie, 0.01 ETH
  - transfer: alice -> bob, 0.005 ETH
  - transfer: bob -> charlie, 0.005 ETH

  - log: "NFT done"

  # Phase 8: MultiSig simulation
  - transfer: alice -> dave, 0.01 ETH
  - transfer: bob -> dave, 0.01 ETH
  - transfer: charlie -> dave, 0.01 ETH
  - transfer: dave -> deployer, 0.025 ETH

  - log: "MultiSig done"

  # Phase 9: Load testing burst
  - transfer: alice -> bob, 0.001 ETH
  - transfer: bob -> charlie, 0.001 ETH
  - transfer: charlie -> dave, 0.001 ETH
  - transfer: dave -> alice, 0.001 ETH
  - transfer: alice -> charlie, 0.001 ETH
  - transfer: bob -> dave, 0.001 ETH
  - transfer: charlie -> alice, 0.001 ETH
  - transfer: dave -> bob, 0.001 ETH

  - log: "Load tests done"

  # Phase 10: Final verification
  - transfer: alice -> deployer, 0.1 ETH
  - transfer: bob -> deployer, 0.1 ETH
  - transfer: charlie -> deployer, 0.1 ETH
  - transfer: dave -> deployer, 0.1 ETH

  - log: "All tests done"
  - log: "Completed 40 operations"